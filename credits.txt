Registry class - https://gist.github.com/Raik176/9187a4960869749a6d50456115eab6e1